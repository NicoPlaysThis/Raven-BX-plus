package keystrokesmod.module.impl.exploit.disabler;

import keystrokesmod.event.SendPacketEvent;
import keystrokesmod.module.impl.exploit.Disabler;
import keystrokesmod.module.setting.impl.SubMode;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C0FPacketConfirmTransaction;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.jetbrains.annotations.NotNull;

public class MinelandDisabler extends SubMode<Disabler> {
    public MinelandDisabler(String name, @NotNull Disabler parent) {
        super(name, parent);
    }

    @SubscribeEvent
    public void onSendPacket(@NotNull SendPacketEvent event) {
            if (event.getPacket() instanceof C0FPacketConfirmTransaction)
                event.setCanceled(true);
            else if (event.getPacket() instanceof C03PacketPlayer
                    && !(event.getPacket() instanceof C03PacketPlayer.C04PacketPlayerPosition)
                    && !(event.getPacket() instanceof C03PacketPlayer.C05PacketPlayerLook)
                    && !(event.getPacket() instanceof C03PacketPlayer.C06PacketPlayerPosLook)
            )
                event.setCanceled(true);
    }
}
